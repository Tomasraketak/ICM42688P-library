#include <ICM42688P.h>

ICM42688P imu;
#define CS_PIN 17

void setup() {
  Serial.begin(115200);
  imu.begin(SPI, CS_PIN);
  imu.enableFIFO();
}

void loop() {
  float ax, ay, az, gx, gy, gz;
  if (imu.readFIFO(ax, ay, az, gx, gy, gz)) {
    Serial.println("FIFO Accel g: " + String(ax) + " " + String(ay) + " " + String(az));
    Serial.println("FIFO Gyro deg/s: " + String(gx) + " " + String(gy) + " " + String(gz));
  } else {
    Serial.println("No FIFO data");
  }
  delay(100);
}